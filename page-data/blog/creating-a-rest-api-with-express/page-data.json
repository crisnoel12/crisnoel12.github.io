{"componentChunkName":"component---src-pages-blog-contentful-post-slug-tsx","path":"/blog/creating-a-rest-api-with-express/","result":{"data":{"contentfulPost":{"id":"22196632-d914-5434-b5a8-6d19e681aafe","slug":"creating-a-rest-api-with-express","title":"Creating a REST API with Express","date":"September 24th, 2017","image":{"file":{"url":"//images.ctfassets.net/e87exinclc25/5zL827z6ytGvUbSPuiqiCA/247fbe50d0ed8d97b598cdb48f546402/rest-api.png"}},"content":{"raw":"{\"nodeType\":\"document\",\"data\":{},\"content\":[{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Introduction\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Express is a Node Web Framework that was created to build Web apps and APIs. In this tutorial, we’re going to look at how to create a todo API using express. Now what is a REST API? \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"REST\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" stands for (Representational State Transfer), while \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"API\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" stands for (Application Programming Interface). Basically a REST API allows developers to make \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"HTTP\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" requests to it and in return receive a response.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Pre-Requisites\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"unordered-list\",\"data\":{},\"content\":[{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"A text editor\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Command Line / Terminal\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://nodejs.org/en/\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"Node.js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://www.mongodb.com/\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"MongoDB\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://www.getpostman.com/\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"Postman\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\"\",\"marks\":[],\"data\":{}}]}]}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Directory Structure\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"This project will be nice and small. Here’s a look at the base files and folders.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"todo-api\\n|--models\\n|----todo.js\\n|--node_modules\\n|--routes\\n|----todos.js\\n|--package.json\\n|--server.js\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Project Setup\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"ordered-list\",\"data\":{},\"content\":[{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Start up MongoDB\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Create a directory anywhere in your computer and change directories into it.\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Open a up a terminal and run \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"npm init \",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"and hit enter through the prompts.\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Install nodemon globally. \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"npm install -g nodemon\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". This will refresh changes to our project.\",\"marks\":[],\"data\":{}}]}]},{\"nodeType\":\"list-item\",\"data\":{},\"content\":[{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Install \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"dependencies\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}}]}]}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"npm install -S express mongoose body-parser morgan cors\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"or if you prefer \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://yarnpkg.com/\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"Yarn\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\":\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"yarn add express mongoose body-parser morgan cors\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Server.Js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Create a file called server.js in your project. This file will essentially have all of our server logic hence the name server.js.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"'use strict';\\n\\n/* Packages */\\nvar express = require('express');\\nvar bodyParser = require('body-parser');\\nvar logger = require('morgan');\\nvar mongoose = require('mongoose');\\nvar cors = require('cors');\\nvar port = process.env.PORT || 8080;\\nvar app = express();\\n\\n/* Connect to Mongo */\\nmongoose.connect(\\\"mongodb://localhost:27017/todos\\\");\\nvar db = mongoose.connection;\\ndb.on(\\\"error\\\", function (err) {\\n    console.error(\\\"\\\\x1b[31m%s\\\\x1b[0m\\\", \\\"Connection error:\\\", err);\\n});\\ndb.once(\\\"open\\\", function () {\\n    console.log(\\\"\\\\x1b[36m%s\\\\x1b[0m\\\", \\\"Connected to Mongo\\\");\\n});\\n\\n/* Middleware */\\napp.use(logger(\\\"dev\\\")); // logs http requests in console\\napp.use(bodyParser.json()); // enables us to get data from a post request\\n\\n// catch 404 and forward to error handler\\napp.use(function (req, res, next) {\\n    var err = new Error(\\\"Not Found\\\");\\n    err.status = 404;\\n    next(err);\\n});\\n\\n// Error handler\\napp.use(function (err, req, res, next) {\\n    res.status(err.status || 500);\\n    res.json({\\n        error: {\\n            message: err.message\\n        }\\n    });\\n});\\n\\n// Start Server\\napp.listen(port, function () {\\n    console.log(\\\"\\\\x1b[36m%s\\\\x1b[0m\\\", \\\"Server up and running on port:\\\", port);\\n});\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Just with any node project, we require our dependencies that we installed earlier at the top of the file. Next we connect to our local MongoDB service and append the name of the database we want to create which is \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Now, in your terminal run: \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"nodemon server.js\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". Make sure you are running MongoDB in the background or else you might receive a console error in your terminal. If everything went smoothly, you should see:\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Server up and running on port: 8080\\nConnected to Mongo\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"at the end of your console.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Notice the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"app.use()\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" methods in the file. These are express’ middleware. They handle events and routes when triggered. Later we will add our \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"todos routes middleware\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" into the mix so we can \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"create, read, update and delete todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Lastly we have the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"app.listen()\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" method, this basically starts our server at a given port. We set it to the node environment’s port \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"or\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" port 8080. You can visit \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"localhost:8080\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" in your browser, you should see an error message saying \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"not found\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". We have not set any routes in the root of the server, that’s why it defaulted to use the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"404\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" middleware.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Creating Our Todo Model\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"In your project directory create a folder called \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Models\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" and then a file called \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Todo.js\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" within it. This file will shape how we want our todos to look. We want a \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"title, status and creation_date\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" for every todo. We’ll use the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"http://mongoosejs.com/docs/guide.html\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"mongoose\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\" package to help us achieve this.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-3\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Models/Todo.Js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"'use strict';\\n\\nvar mongoose = require(\\\"mongoose\\\");\\nvar Schema = mongoose.Schema;\\n\\nvar TodoSchema = new Schema({\\n    title: {\\n        type: String,\\n        required: true,\\n        trim: true\\n    },\\n    status: {\\n        type: Boolean,\\n        required: true,\\n        default: false\\n    },\\n    creation_date: { \\n        type: Date,\\n        required: true, \\n        default: Date.now \\n    }\\n});\\n\\nvar Todo = mongoose.model('Todo', TodoSchema);\\nmodule.exports = Todo; // export `Todo` variable to be available for other files\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Todo Routes\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Now is the time to create our routes and test our endpoints. We’ll be using Express’ router to help us. When we send a \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"GET\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" request to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"localhost:8080/api/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\", our goal is to get a list of all the todos from the todos database in json form. When we send a \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"POST\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" request to the same endpoint, we want to create a new todo from a parsed json object. Here’s a table to better illustrate what we’re trying to accomplish.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"embedded-asset-block\",\"data\":{\"target\":{\"sys\":{\"id\":\"2RY14RAMNflLhSRlVn0AjF\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Create a routes folder, then create a file named Todos.js inside.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-3\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Routes/Todos.Js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"\\\"use strict\\\";\\n\\nvar express = require(\\\"express\\\");\\nvar router = express.Router();\\nvar mongoose = require('mongoose');\\n\\nvar Todo = require(\\\"../models/todo\\\");\\n\\nrouter.get('/', function(req, res, next) {\\n    res.json({message: 'API working!'})\\n});\\n\\nmodule.exports = router; // export `router` variable to be available for other files\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Import the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"routes/todos.js\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" file near top of server.js file.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-3\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Server.Js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"var todosRoute = require('./routes/todos.js');\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Add a todos route middleware at \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"/api/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" just above the 404 error handler.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"// Register 'todos' Route\\napp.use(\\\"/api/todos\\\", todosRoute);\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Notice how we’re using \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"/api/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" in the route middleware and then passing the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"todosRoute\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" that we imported. All the routes that we define in the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Routes/todos.js\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" will be based on \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"/api/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". So routes referencing \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"\\\"/\\\"\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" in \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Routes/todos.js\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" will go to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"/api/todos (localhost:8080/api/todos)\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Postman\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Open up postman. Postman will help us test HTTP verbs that aren’t supported by browsers by default. Now in Postman’s url bar go to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"localhost:8080/api/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\", make sure the HTTP verb is set to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"GET\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" and press send. You should see something like this.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"embedded-asset-block\",\"data\":{\"target\":{\"sys\":{\"id\":\"2LjmCJ4VdzKy8OadwrI9KI\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Let’s actually get some real todo data up in here. First let’s create a post method.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-3\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Routes/Todos.Js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"router.post('/', function(req, res, next) {\\n    var todo = new Todo(req.body);\\n    todo.save(function(err, todo) {\\n        if (err) return next(err);\\n        res.status(201);\\n        res.json({message: \\\"Todo Created!\\\", todo: todo});\\n    });\\n});\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Now let’s add our first todo! Change the HTTP Verb from \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"GET\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"POST\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". Click the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"body\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" tab, select the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"raw\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" radio button and select \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"JSON(application/json)\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" from the dropdown. Let’s set \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Mow the lawn\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" as our first todo. Since our \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Todo Model\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" has default fields for the creation date and status, we only need to supply the title field. In the textarea below the radio buttons enter a json object for the todo like so.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"embedded-asset-block\",\"data\":{\"target\":{\"sys\":{\"id\":\"1YBVPaVkv7OGEWKsI89jiV\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Add another todo, Get \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"a haircut\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" just for kicks.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Let’s change our get \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"all todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" method to retrieve all of our todos.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-3\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Routes/Todos.Js\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"router.get('/', function(req, res, next) {\\n    Todo.find(function(err, todos){\\n        if (err) return next(err);\\n        res.json(todos);\\n    });\\n});\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Test with postman, change HTTP verb back to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"GET\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\", make sure url is \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"localhost:8080/api/todos\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" and press send. We should get back two total todos: \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Mow the lawn\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" and \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Get a haircut\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Get Single Todo\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We have three more actions to finish. All three will use the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"id\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" params. Thankfully, Mongo automatically creates an \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"id\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" field for each todo document of type \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"ObjectId\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\".\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"router.get('/:id', function(req, res, next) {\\n    var id = mongoose.Types.ObjectId(req.params.id); // cast id param to ObjectId\\n    Todo.findById(id, function (err, todo) {\\n        if (err) return next(err);\\n        if (!todo) { \\n            err = new Error(\\\"Todo Not Found\\\"); \\n            err.status = 404; \\n            return next(err); \\n        } // if todo doesn't exist, set err\\n        res.json(todo);\\n    });\\n});\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"In Postman, copy the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"id\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" value for \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Mow the lawn\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" and append it to the url to check.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Update Todo\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"We’ll use the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"PUT\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" method to update our todos. Within that we’ll use the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"findByIdAndUpdate\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" mongoose method. This will allow us to return the new todo in the response with the use of the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"{ new: true }\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" parameter. We’ll also set the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"validators\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" to true so users can’t enter a null todo.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"router.put('/:id', function (req, res, next) {\\n    Todo.findByIdAndUpdate(\\n        req.params.id, \\n        req.body, \\n        { \\n            new: true, \\n            runValidators: true \\n        }, function (err, todo) {\\n            if (err) return next(err);\\n            if (!todo) { \\n                err = new Error(\\\"Todo Not Found\\\"); \\n                err.status = 404; \\n                return next(err);\\n            }\\n        }\\n        res.json({ message: \\\"Todo updated!\\\", todo: todo });\\n    });\\n});\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Change the HTTP verb in Postman to \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"PUT\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". Make sure url is at \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"localhost:8080/api/todos/[id-of-mow-the-lawn]\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". Now just like the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"post\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" method we’re going to go the body tab, select raw and select JSON(application/json) from the dropdown. Let’s update \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Mow the lawn\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"’s status to true, meaning we’ve completed the todo. In the textarea, type a json object with status equaling true.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"{\\n    \\\"status\\\": true\\n}\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Delete Todo\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Finally, for our last HTTP operation, we’ll set up a delete route. We can use \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"mongoose’s\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\" remove method to achieve deleting a todo from the database.\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"router.delete('/:id', function (req, res, next) {\\n    Todo.findById(req.params.id, function (err, todo) {\\n        if (err) return next(err);\\n        if (!todo) { \\n            err = new Error(\\\"Todo Not Found\\\"); \\n            err.status = 404; \\n            return next(err); \\n        }\\n        todo.remove(function(err) {\\n            if (err) return next(err);\\n            res.json({message: \\\"Todo deleted!\\\"});\\n        })\\n    });\\n});\",\"marks\":[{\"type\":\"code\"}],\"data\":{}}]},{\"nodeType\":\"heading-2\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"Conclusion\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"paragraph\",\"data\":{},\"content\":[{\"nodeType\":\"text\",\"value\":\"And just like that, we have a RESTful API up and running. In order for other domains to interact and fetch data from this API we will have to enable the \",\"marks\":[],\"data\":{}},{\"nodeType\":\"hyperlink\",\"data\":{\"uri\":\"https://github.com/expressjs/cors\"},\"content\":[{\"nodeType\":\"text\",\"value\":\"cors\",\"marks\":[],\"data\":{}}]},{\"nodeType\":\"text\",\"value\":\" package. CORS stands for \",\"marks\":[],\"data\":{}},{\"nodeType\":\"text\",\"value\":\"Cross-Origin Resource Sharing\",\"marks\":[{\"type\":\"bold\"}],\"data\":{}},{\"nodeType\":\"text\",\"value\":\". Domains, by default don’t allow other domains to fetch their data, we can remedy this by enabling cors to specific routes or all routes. We will tackle this in a future blog post with React.js.\",\"marks\":[],\"data\":{}}]}]}","references":[{"contentful_id":"2RY14RAMNflLhSRlVn0AjF","id":"4469e870-9e8b-5240-8e6f-1d46c20a8f33","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=750&h=273&q=50&fm=webp 750w,\nhttps://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=1080&h=394&q=50&fm=webp 1080w,\nhttps://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=1344&h=490&q=50&fm=webp 1344w","sizes":"100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=1344&h=490&q=50&fm=png","srcSet":"https://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=750&h=273&q=50&fm=png 750w,\nhttps://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=1080&h=394&q=50&fm=png 1080w,\nhttps://images.ctfassets.net/e87exinclc25/2RY14RAMNflLhSRlVn0AjF/ab1b2c5f4cf57cd17319fee8f0b739a4/Screen_Shot_2021-03-08_at_5.01.50_PM.png?w=1344&h=490&q=50&fm=png 1344w","sizes":"100vw"}},"layout":"fullWidth","backgroundColor":"#f8f8f8","width":1,"height":0.3645833333333333}},{"contentful_id":"2LjmCJ4VdzKy8OadwrI9KI","id":"d19820e4-b387-5b3a-81c6-f52133b94526","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=750&h=391&q=50&fm=webp 750w,\nhttps://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1080&h=563&q=50&fm=webp 1080w,\nhttps://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1366&h=711&q=50&fm=webp 1366w,\nhttps://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1920&h=1000&q=50&fm=webp 1920w","sizes":"100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1920&h=1000&q=50&fm=png","srcSet":"https://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=750&h=391&q=50&fm=png 750w,\nhttps://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1080&h=563&q=50&fm=png 1080w,\nhttps://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1366&h=711&q=50&fm=png 1366w,\nhttps://images.ctfassets.net/e87exinclc25/2LjmCJ4VdzKy8OadwrI9KI/eccada1e0fd68da50ca649ce881318df/postman-api-working.png?w=1920&h=1000&q=50&fm=png 1920w","sizes":"100vw"}},"layout":"fullWidth","backgroundColor":"#f8f8f8","width":1,"height":0.5208333333333334}},{"contentful_id":"1YBVPaVkv7OGEWKsI89jiV","id":"af0082b0-c39c-5222-b7de-e3bd0fc1f098","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=750&h=394&q=50&fm=webp 750w,\nhttps://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1080&h=568&q=50&fm=webp 1080w,\nhttps://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1366&h=718&q=50&fm=webp 1366w,\nhttps://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1920&h=1009&q=50&fm=webp 1920w","sizes":"100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1920&h=1009&q=50&fm=png","srcSet":"https://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=750&h=394&q=50&fm=png 750w,\nhttps://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1080&h=568&q=50&fm=png 1080w,\nhttps://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1366&h=718&q=50&fm=png 1366w,\nhttps://images.ctfassets.net/e87exinclc25/1YBVPaVkv7OGEWKsI89jiV/66a9e1dbed5fce6c3678adbbe27b89b0/postman-post.png?w=1920&h=1009&q=50&fm=png 1920w","sizes":"100vw"}},"layout":"fullWidth","backgroundColor":"#f8f8f8","width":1,"height":0.5255208333333333}}]}}},"pageContext":{"id":"22196632-d914-5434-b5a8-6d19e681aafe","slug":"creating-a-rest-api-with-express","__params":{"slug":"creating-a-rest-api-with-express"}}},"staticQueryHashes":[],"slicesMap":{}}